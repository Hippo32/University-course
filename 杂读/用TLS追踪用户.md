# 用TLS追踪用户 #
2018/9/13 23:46:17 

## 什么是TLS ##
TLS即安全传输层协议，用于在两个通信应用程序之间提供保密性和数据完整性。

该协议由两层组成：TLS记录协议（TLS Record）和TLS握手协议（TLS Handshake）。

1999年，SSL因为应用广泛，已经成为互联网上的事实标准。IETF就在那年把SSL标准化。标准化之后的名称改为TLS，中文叫做传输层安全协议。所以TLS1.0可以认为是SSL3.1。

## TLS原理 ##
HTTPS是在HTTP和TCP之间加了一层TLS，这个TLS协商了一个对称密钥来进行HTTP加密。

同时TLS不仅仅可以用在HTTP，也可以用在FTP，Telnet等应用层协议上。

ssL/TLS实际上混合使用了对称和非对称密钥，主要分成这几步：

- 使用非对称密钥建立安全的通道
	- 客户端请求HTTPS连接，发送可用的TLS版本和可用的密码套件
	- 服务端返回证书，密码套件和TLS版本
- 用安全的通道产生并发送临时的随机对称密钥
	- 生成随机对称密钥，使用证书中的服务端公钥加密，发送给服务端
	- 服务端使用私钥解密获取对称密钥
- 使用对称密钥加密信息，进行交互

## 用TLS协议追踪用户 ##
主要是使用TLS对话恢复机制。

TLS对话恢复机制允许网站利用早前的TLS对话中交换的密钥，来缩减TLS握手程序，而这也开启了让网站可以链接两个对话的可能性。由于重启浏览器会顺便清空缓存，所以这个方法仅在浏览器未重启的情况下，网站才能通过TLS对话恢复进行连续的用户追踪。


参考：

- [详解SSL/TLS](http://www.mamicode.com/info-detail-1846390.html)